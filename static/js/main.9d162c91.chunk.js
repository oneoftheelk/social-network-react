(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,n){e.exports={friendsItem:"Friends_friendsItem__1Bktu"}},119:function(e,t,n){e.exports=n.p+"static/media/preloader.c368e429.gif"},120:function(e,t,n){e.exports={avatarSmall:"Post_avatarSmall__3Ecgq"}},123:function(e,t,n){e.exports=n(250)},128:function(e,t,n){},248:function(e,t,n){e.exports={background:"ProfilePage_background__3OfdM"}},249:function(e,t,n){},25:function(e,t,n){e.exports={container:"Users_container__2R8sx",userPhoto:"Users_userPhoto__3UYp_",userPages:"Users_userPages__3_ULw",item:"Users_item__3XGp_",selectedPage:"Users_selectedPage__iLi0i"}},250:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),s=n(53),o=n.n(s),c=n(15),u=(n(128),n(14)),l=n(115),m=n.n(l),d=n(27),f=n.n(d),g=function(e){return i.a.createElement("div",{className:m.a.friendsItem},i.a.createElement("img",{src:f.a,alt:"friends"}),i.a.createElement("div",null,e.name))},p=n(43),E=n.n(p),h=function(e){var t=e.friends.map(function(e){return i.a.createElement(g,{key:e.id,id:e.id,name:e.name})}),n=e.links.map(function(t){return i.a.createElement("div",{className:"/friends"===t.linkTo&&E.a.friendsNav},i.a.createElement(u.b,{to:t.linkTo,onClick:function(){return a(t.id)},activeClassName:"active",className:t.id===e.activeLink&&E.a.active},"".concat(t.linkTo.slice(1,2).toUpperCase()).concat(t.linkTo.slice(2))))}),a=function(t){e.changeLink(t)};return i.a.createElement("nav",{className:E.a.nav},n,i.a.createElement("div",{className:E.a.friends},t))},v=n(6),_=n(7),b={friends:[{id:1,name:"Dmitry"},{id:2,name:"Jane"},{id:3,name:"Mary"},{id:4,name:"Ian"},{id:5,name:"Alice"}],links:[{id:1,linkTo:"/profile"},{id:2,linkTo:"/dialogs"},{id:3,linkTo:"/users"},{id:4,linkTo:"/news"},{id:5,linkTo:"/music"},{id:6,linkTo:"/settings"},{id:7,linkTo:"/friends"}],activeLink:1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LINK":return Object(_.a)({},e,{activeLink:t.newActiveLink});default:return e}},P=Object(v.b)(function(e){return{friends:e.navbar.friends,links:e.navbar.links,activeLink:e.navbar.activeLink}},{changeLink:function(e){return{type:"CHANGE_LINK",newActiveLink:e}}})(h),S=n(20),j=n(21),k=n(23),C=n(22),y=n(24),N=n(5),w=n(37),T=n(118).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"978dea68-3e9b-4548-8e9a-4417d27d7337"}}),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return T.get("users?page=".concat(e,"&count=").concat(t)).then(function(e){return e.data})},I=function(e){return T.post("follow/".concat(e)).then(function(e){return e.data})},A=function(e){return T.delete("follow/".concat(e)).then(function(e){return e.data})},F=function(e){return console.warn("Outdated method! Please use profileAPI object."),U.getProfile(e)},U={getProfile:function(e){return T.get("profile/".concat(e)).then(function(e){return e.data})},getStatus:function(e){return T.get("profile/status/".concat(e))},updateStatus:function(e){return T.put("profile/status",{status:e}).then(function(e){return e.data})}},D=function(){return T.get("auth/me")},R=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return T.post("auth/login",{email:e,password:t,rememberMe:n})},L=function(){return T.delete("auth/login")},x={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},z=function(e){return{type:"SET_IS_FETCHING",isFetching:e}},G=function(e,t){return{type:"TOGGLE_FOLLOWING_PROGRESS",isFetching:e,userId:t}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(_.a)({},e,{users:t.users});case"ADD_TO_FRIENDS":return Object(_.a)({},e,{users:e.users.map(function(e){return e.id===t.userId?Object(_.a)({},e,{followed:!0}):e})});case"REMOVE_FROM_FRIENDS":return Object(_.a)({},e,{users:e.users.map(function(e){return e.id===t.userId?Object(_.a)({},e,{followed:!1}):e})});case"SET_CURRENT_PAGE":return Object(_.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(_.a)({},e,{totalUsersCount:t.totalCount});case"SET_IS_FETCHING":return Object(_.a)({},e,{isFetching:t.isFetching});case"TOGGLE_FOLLOWING_PROGRESS":return Object(_.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(w.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter(function(e){return e!==t.userId})});default:return e}},W=n(25),B=n.n(W),J=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],a=1;a<=t;a++)n.push(a);return i.a.createElement("div",null,i.a.createElement("div",{className:B.a.userPages},n.map(function(t){return i.a.createElement("span",{onClick:function(){return e.onPageChange(t)},className:e.currentPage===t?B.a.selectedPage:""},t," ")})),e.users.map(function(t){return i.a.createElement("div",{key:t.id,className:B.a.container},i.a.createElement("div",{className:B.a.item},i.a.createElement(u.b,{to:"/profile/".concat(t.id)},i.a.createElement("img",{src:t.photos.small||f.a,className:B.a.userPhoto,alt:"userPhoto"}))),i.a.createElement("div",{className:B.a.item},i.a.createElement("div",null,t.name),i.a.createElement("div",null,t.status)),i.a.createElement("div",{className:B.a.item},i.a.createElement("div",null,"country, city")),i.a.createElement("div",{className:B.a.item},t.followed?i.a.createElement("button",{disabled:e.followingInProgress.some(function(e){return e===t.id}),onClick:function(){e.removeUserFromFriends(t.id)}},"Remove"):i.a.createElement("button",{disabled:e.followingInProgress.some(function(e){return e===t.id}),onClick:function(){e.addUserToFriends(t.id)}},"Add")))}))},Y=n(119),K=n.n(Y),X=function(e){return i.a.createElement("img",{src:K.a,alt:"",width:"100"})},V=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(k.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).onPageChange=function(e){n.props.setCurrentPage(e),n.props.getUsers(e,n.props.pageSize)},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.props.isFetching?i.a.createElement(X,null):i.a.createElement(J,Object.assign({},this.props,{onPageChange:this.onPageChange})))}}]),t}(i.a.Component),q=Object(N.d)(Object(v.b)(function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}},{setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},toggleFollowingProgress:G,getUsers:function(e,t){return function(n){n(z(!0)),M(e,t).then(function(e){n(z(!1)),n({type:"SET_USERS",users:e.items}),n({type:"SET_TOTAL_USERS_COUNT",totalCount:e.totalCount})})}},addUserToFriends:function(e){return function(t){t(G(!0,e)),I(e).then(function(n){0===n.resultCode&&t(function(e){return{type:"ADD_TO_FRIENDS",userId:e}}(e)),t(G(!1,e))})}},removeUserFromFriends:function(e){return function(t){t(G(!0,e)),A(e).then(function(n){0===n.resultCode&&t(function(e){return{type:"REMOVE_FROM_FRIENDS",userId:e}}(e)),t(G(!1,e))})}}}))(V),$={messages:[{id:1,message:"message1",from:"me"},{id:2,message:"message2",from:"friend"},{id:3,message:"message3",from:"me"}],dialogs:[{id:1,name:"Dmitry"},{id:2,name:"Jane"},{id:3,name:"Mary"},{id:4,name:"Ian"},{id:5,name:"Alice"}]},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-MESSAGE":var n={id:e.messages[e.messages.length-1].id+1,message:"message".concat(e.messages[e.messages.length-1].id+1),from:t.executor};return Object(_.a)({},e,{messages:[].concat(Object(w.a)(e.messages),[n])});default:return e}},Z=function(e){var t="/dialogs/id".concat(e.id);return i.a.createElement("div",null,i.a.createElement(u.b,{to:t,activeClassName:"active"},e.name))},ee=n(76),te=n.n(ee),ne=function(e){var t="me"===e.from?te.a.MyMessage:te.a.FriendsMessage;return i.a.createElement("div",{className:t},e.message)},ae=n(56),re=n.n(ae),ie=function(e){var t=e.dialogsPage,n=t.dialogs.map(function(e){return i.a.createElement(Z,{name:e.name,id:e.id})}),a=t.messages.map(function(e){return i.a.createElement(ne,{message:e.message,from:e.from})}),r=function(t){e.addMessage(t)};return i.a.createElement("div",{className:re.a.dialogs},i.a.createElement("div",{className:re.a.dialogsItem},n),i.a.createElement("div",{className:re.a.dialogsMessage},i.a.createElement("button",{onClick:function(){return r("me")}},"Message from me"),i.a.createElement("button",{onClick:function(){return r("friend")}},"Message from friend"),a))},se=function(e){return{isAuthorized:e.auth.isAuthorized}},oe=function(e){var t=function(t){function n(){return Object(S.a)(this,n),Object(k.a)(this,Object(C.a)(n).apply(this,arguments))}return Object(y.a)(n,t),Object(j.a)(n,[{key:"render",value:function(){return this.props.isAuthorized?i.a.createElement(e,this.props):i.a.createElement(c.a,{to:"/login"})}}]),n}(i.a.Component);return Object(v.b)(se)(t)},ce=Object(N.d)(Object(v.b)(function(e){return{dialogsPage:e.dialogsPage}},function(e){return{addMessage:function(t){e(function(e){return{type:"ADD-MESSAGE",executor:e}}(t))}}}),oe)(ie),ue={posts:[{id:1,message:"Hey!",likeCount:15},{id:2,message:"This is my first project!",likeCount:23}],profile:null,status:""},le=function(e){return{type:"SET_STATUS",status:e}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={id:5,message:t.newPostText,likeCount:0};return Object(_.a)({},e,{posts:[].concat(Object(w.a)(e.posts),[n])});case"SET_USER_PROFILE":return Object(_.a)({},e,{profile:t.profile});case"SET_STATUS":return Object(_.a)({},e,{status:t.status});default:return e}},de=n(252),fe=n(251),ge=n(120),pe=n.n(ge),Ee=function(e){return i.a.createElement("div",null,i.a.createElement("div",{className:pe.a.avatarSmall},i.a.createElement("img",{src:f.a,alt:""}),i.a.createElement("div",null,e.message," \u2764",e.likeCount)))},he=n(77),ve=n.n(he),_e=function(e){if(!e)return"Field is required"},be=n(57),Oe=n(78),Pe=n.n(Oe),Se=function(e){e.input;var t=e.meta,n=Object(be.a)(e,["input","meta"]),a=t.error&&t.touched,r=a?Pe.a.error:"";return i.a.createElement("div",{className:"".concat(Pe.a.formControl," ").concat(r)},i.a.createElement("div",null,n.children),a&&i.a.createElement("span",null,t.error))},je=function(e){var t=e.input,n=(e.meta,e.child,Object(be.a)(e,["input","meta","child"]));return i.a.createElement(Se,e,i.a.createElement("textarea",Object.assign({},t,n)))},ke=function(e){var t=e.input,n=(e.meta,e.child,Object(be.a)(e,["input","meta","child"]));return i.a.createElement(Se,e,i.a.createElement("input",Object.assign({},t,n)))},Ce=(a=10,function(e){if(e.length>a)return"Max length is ".concat(a," symbols")}),ye=Object(fe.a)({form:"addNewPost"})(function(e){return i.a.createElement("form",{onSubmit:e.handleSubmit},i.a.createElement("div",{className:ve.a.addPost},i.a.createElement("div",{className:ve.a.caption},"My Posts"),i.a.createElement(de.a,{component:je,name:"newPostText",placeholder:"your news...",validate:[_e,Ce]}),i.a.createElement("button",null,"Add post")))}),Ne=function(e){var t=e.posts.map(function(e){return i.a.createElement(Ee,{message:e.message,likeCount:e.likeCount})});return i.a.createElement(i.a.Fragment,null,i.a.createElement(ye,{onSubmit:function(t){e.addPost(t.newPostText)}}),i.a.createElement("div",null,t))},we=Object(v.b)(function(e){return{posts:e.profilePage.posts}},function(e){return{addPost:function(t){var n=function(e){return{type:"ADD-POST",newPostText:e}}(t);e(n)}}})(Ne),Te=n(81),Me=n.n(Te),Ie=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(k.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={editMode:!1,status:n.props.status},n.activateEditMode=function(){n.setState({editMode:!0})},n.deactivateEditMode=function(){n.setState({editMode:!1}),n.props.updateStatus(n.state.status)},n.onStatusChange=function(e){n.setState({status:e.currentTarget.value})},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.editMode&&i.a.createElement("div",null,i.a.createElement("input",{onChange:this.onStatusChange,onBlur:this.deactivateEditMode,autoFocus:!0,value:this.state.status})),!this.state.editMode&&i.a.createElement("div",null,i.a.createElement("span",{onDoubleClick:this.activateEditMode},this.props.status)))}}]),t}(i.a.Component),Ae=function(e){return e.profile?i.a.createElement("div",{className:Me.a.profileInfo},i.a.createElement("div",{className:Me.a.avatar},i.a.createElement("img",{src:e.profile.photos.small||f.a,alt:""})),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("b",null,e.profile.fullName)),i.a.createElement(Ie,{status:e.status,updateStatus:e.updateStatus}))):i.a.createElement(X,null)},Fe=(n(248),function(e){return i.a.createElement("div",null,i.a.createElement(Ae,{profile:e.profile,status:e.status,updateStatus:e.updateStatus}),i.a.createElement(we,null))}),Ue=function(e){function t(){return Object(S.a)(this,t),Object(k.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userID||1511;this.props.setChosenUserProfile(e),this.props.getStatus(e)}},{key:"render",value:function(){return i.a.createElement(Fe,this.props)}}]),t}(i.a.Component),De=Object(N.d)(Object(v.b)(function(e){return{profile:e.profilePage.profile,status:e.profilePage.status}},{setChosenUserProfile:function(e){return function(t){F(e).then(function(e){t({type:"SET_USER_PROFILE",profile:e})})}},getStatus:function(e){return function(t){U.getStatus(e).then(function(e){t(le(e.data||"/empty status/"))})}},updateStatus:function(e){return function(t){U.updateStatus(e).then(function(n){0===n.resultCode&&t(le(e||"/empty status/"))})}}}),c.f,oe)(Ue),Re=n(82),Le=n.n(Re),xe=function(e){return i.a.createElement("header",{className:Le.a.header},i.a.createElement("img",{src:"https://cdn-images-1.medium.com/max/1600/1*VeM-5lsAtrrJ4jXH96h5kg.png",alt:""}),i.a.createElement("div",{className:Le.a.loginBlock},e.isAuthorized?i.a.createElement("span",{onClick:e.logout},e.login):i.a.createElement(u.b,{to:"/login"},"Sign in")))},ze={userId:null,email:null,login:null,isAuthorized:!1},Ge=function(e,t,n,a){return{type:"SET_USER_DATA",payload:{userId:e,email:t,login:n,isAuthorized:a}}},He=function(){return function(e){D().then(function(t){if(0===t.data.resultCode){var n=t.data.data,a=n.id,r=n.email,i=n.login;e(Ge(a,r,i,!0))}})}},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(_.a)({},e,t.payload);default:return e}},Be=function(e){function t(){return Object(S.a)(this,t),Object(k.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.authorizeMe()}},{key:"render",value:function(){return i.a.createElement(xe,this.props)}}]),t}(i.a.Component),Je=Object(v.b)(function(e){return{isAuthorized:e.auth.isAuthorized,login:e.auth.login}},{authorizeMe:He,logout:function(){return function(e){L().then(function(t){0===t.data.resultCode&&e(Ge(null,null,null,!1))})}}})(Be),Ye=n(83),Ke=n.n(Ye),Xe=Object(fe.a)({form:"login"})(function(e){return i.a.createElement("form",{onSubmit:e.handleSubmit},i.a.createElement("div",null,i.a.createElement(de.a,{component:ke,name:"email",placeholder:"E-mail",validate:[_e]})),i.a.createElement("div",null,i.a.createElement(de.a,{component:ke,name:"password",placeholder:"Password",type:"password",validate:[_e]})),i.a.createElement("div",{className:Ke.a.rememberMe},i.a.createElement(de.a,{component:ke,name:"rememberMe",type:"checkbox"}),"Remember me"),i.a.createElement("div",null,i.a.createElement("button",null,"Login")))}),Ve=Object(v.b)(function(e){return{isAuthorized:e.auth.isAuthorized}},{login:function(e,t,n){return function(a){R(e,t,n).then(function(e){0===e.data.resultCode&&a(He())})}}})(function(e){return e.isAuthorized?i.a.createElement(c.a,{to:"/profile"}):i.a.createElement("div",{className:Ke.a.login},i.a.createElement("h1",null,"Login"),i.a.createElement(Xe,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}}))}),qe=function(){return i.a.createElement("div",{className:"wrapper"},i.a.createElement(Je,null),i.a.createElement(P,null),i.a.createElement("div",{className:"pagesWrapper"},i.a.createElement(c.b,{path:"/profile/:userID?",render:function(){return i.a.createElement(De,null)}}),i.a.createElement(c.b,{path:"/dialogs",render:function(){return i.a.createElement(ce,null)}}),i.a.createElement(c.b,{path:"/users",render:function(){return i.a.createElement(q,null)}}),i.a.createElement(c.b,{path:"/login",render:function(){return i.a.createElement(Ve,null)}})))};n(249),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $e=n(253),Qe=n(122),Ze=Object(N.c)({profilePage:me,dialogsPage:Q,usersPage:H,navbar:O,auth:We,form:$e.a}),et=Object(N.e)(Ze,Object(N.a)(Qe.a));o.a.render(i.a.createElement(u.a,null,i.a.createElement(v.a,{store:et},i.a.createElement(qe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},27:function(e,t,n){e.exports=n.p+"static/media/avatar.fc047347.png"},43:function(e,t,n){e.exports={nav:"Nav_nav__1e3nW",active:"Nav_active__2tEWY",friendsNav:"Nav_friendsNav__18cCO",friends:"Nav_friends__E7lJj"}},56:function(e,t,n){e.exports={dialogs:"DialogsPage_dialogs__1zCWH",dialogsItem:"DialogsPage_dialogsItem__Xv8W1",active:"DialogsPage_active__1PkGb",dialogsMessage:"DialogsPage_dialogsMessage__3IDOw"}},76:function(e,t,n){e.exports={MyMessage:"MessagesItem_MyMessage__gjeo1",FriendsMessage:"MessagesItem_FriendsMessage__1K1iw"}},77:function(e,t,n){e.exports={addPost:"MyPosts_addPost__2-one",caption:"MyPosts_caption__ELyxh"}},78:function(e,t,n){e.exports={formControl:"FormsControls_formControl__1pkYd",error:"FormsControls_error__2XDiS"}},81:function(e,t,n){e.exports={avatar:"ProfileInfo_avatar__3v65o",profileInfo:"ProfileInfo_profileInfo__3fY7b"}},82:function(e,t,n){e.exports={header:"Header_header__5YG4N",loginBlock:"Header_loginBlock__8aGkF"}},83:function(e,t,n){e.exports={login:"Login_login__20i0z",rememberMe:"Login_rememberMe__2uknt"}}},[[123,1,2]]]);
//# sourceMappingURL=main.9d162c91.chunk.js.map